{"ast":null,"code":"/**\n * User login page with authentication form.\n * Handles user login and JWT token storage.\n */import React,{useState}from'react';import{useNavigate,Link}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{authAPI}from'../services/api';import{getStatusErrorMessage}from'../utils/errorHandler';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const[formData,setFormData]=useState({username:'',// API expects 'username' field for email\npassword:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const navigate=useNavigate();const{login}=useAuth();/**\n   * Handle form input changes\n   */const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});// Clear error when user starts typing\nif(error)setError('');};/**\n   * Handle form submission\n   */const handleSubmit=async e=>{e.preventDefault();if(!formData.username||!formData.password){setError('Please enter both email and password');return;}setLoading(true);setError('');try{// Call login API\nconst response=await authAPI.login(formData);const{data}=response.data;// Backend wraps response in { success: true, data: {...} }\nconst{access_token,user}=data;// Store token and update auth state\nlogin(access_token,user);// Navigate based on user role\nif(user.role==='employer'){navigate('/employer');}else{navigate('/dashboard');}}catch(error){var _error$response;console.error('Login error:',error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){setError('Invalid email or password');}else{setError(getStatusErrorMessage(error));}}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Sign in to access your AI-powered job portal\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"username\",name:\"username\",value:formData.username,onChange:handleChange,placeholder:\"Enter your email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,placeholder:\"Enter your password\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'Signing In...':'Sign In'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-links\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Create one here\"})]})})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","useNavigate","Link","useAuth","authAPI","getStatusErrorMessage","jsx","_jsx","jsxs","_jsxs","LoginPage","formData","setFormData","username","password","loading","setLoading","error","setError","navigate","login","handleChange","e","target","name","value","handleSubmit","preventDefault","response","data","access_token","user","role","_error$response","console","status","className","children","onSubmit","htmlFor","type","id","onChange","placeholder","required","disabled","to"],"sources":["/Users/surajj/Desktop/JobPortal1/frontend/src/pages/LoginPage.js"],"sourcesContent":["/**\n * User login page with authentication form.\n * Handles user login and JWT token storage.\n */\n\nimport React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { authAPI } from '../services/api';\nimport { getStatusErrorMessage } from '../utils/errorHandler';\n\nconst LoginPage = () => {\n  const [formData, setFormData] = useState({\n    username: '', // API expects 'username' field for email\n    password: '',\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const { login } = useAuth();\n\n  /**\n   * Handle form input changes\n   */\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n    // Clear error when user starts typing\n    if (error) setError('');\n  };\n\n  /**\n   * Handle form submission\n   */\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!formData.username || !formData.password) {\n      setError('Please enter both email and password');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      // Call login API\n      const response = await authAPI.login(formData);\n      const { data } = response.data; // Backend wraps response in { success: true, data: {...} }\n      const { access_token, user } = data;\n      \n      // Store token and update auth state\n      login(access_token, user);\n      \n      // Navigate based on user role\n      if (user.role === 'employer') {\n        navigate('/employer');\n      } else {\n        navigate('/dashboard');\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      \n      if (error.response?.status === 401) {\n        setError('Invalid email or password');\n      } else {\n        setError(getStatusErrorMessage(error));\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"auth-form\">\n        <h1>Welcome Back</h1>\n        <p>Sign in to access your AI-powered job portal</p>\n\n        {error && <div className=\"error-message\">{error}</div>}\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"username\">Email Address</label>\n            <input\n              type=\"email\"\n              id=\"username\"\n              name=\"username\"\n              value={formData.username}\n              onChange={handleChange}\n              placeholder=\"Enter your email\"\n              required\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              placeholder=\"Enter your password\"\n              required\n            />\n          </div>\n\n          <button \n            type=\"submit\" \n            className=\"btn btn-primary\" \n            disabled={loading}\n          >\n            {loading ? 'Signing In...' : 'Sign In'}\n          </button>\n        </form>\n\n        <div className=\"auth-links\">\n          <p>\n            Don't have an account?{' '}\n            <Link to=\"/register\">Create one here</Link>\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}